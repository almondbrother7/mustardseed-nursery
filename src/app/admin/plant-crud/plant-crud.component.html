<h2>Plant Inventory Management</h2>

<app-category-select
  [selectedCategories]="selectedCategories"
  [categories]="categories"
  [categoryLabelMap]="categoryLabelMap"
  (selectionChange)="onCategorySelectionChange($event)">
</app-category-select>

<button
  mat-fab
  color="primary"
  class="add-button"
  (click)="openAddDialog()"
  aria-label="Add Plant">
  <mat-icon>add</mat-icon>
</button>

<ul class="plant-list">
  <li *ngFor="let plant of filteredPlants" class="plant-row">
    <div class="plant-main">
      <div class="plant-title">
        <span class="plant-name">{{ plant.name }}</span>
        <span class="plant-price">${{ plant.price | number:'1.2-2' }}</span>
      </div>
      <div class="plant-meta">
        <span class="inventory" [class.low]="plant.inventory < 1">
          Inv: {{ plant.inventory }}
        </span>
        <span *ngIf="needsImage(plant)" class="chip-warn">🖼️ image needed</span>
      </div>
    </div>
    <span class="spacer"></span>
    <button mat-icon-button aria-label="Edit" (click)="editPlant(plant)">
      <mat-icon>edit</mat-icon>
    </button>
    <button mat-icon-button aria-label="Delete" (click)="deletePlant(plant)">
      <mat-icon>delete</mat-icon>
    </button>
  </li>
</ul>
